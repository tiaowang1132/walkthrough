# Vulhub-mrrobot-walkthrough

## Tool:Vmware,nmap,nikto,nc,wpscan

Set the ethernet0.connectionType = "nat" in vmx file

![Vulhub-mrrobot-walkthrough%20fb5dfb3aa9db40feb8875df214404b3b/Untitled.png](Vulhub-mrrobot-walkthrough%20fb5dfb3aa9db40feb8875df214404b3b/Untitled.png)

## Information Gathering

### Port scan

Use nmap to do a full scan on the target. Use command:

```bash
 nmap -Pn -sS —stats-every 3m —max-restries 1 —max-scan-delay 20 —defeat-rst-ratelimit -T4 -p- [ip]
```

![Vulhub-mrrobot-walkthrough%20fb5dfb3aa9db40feb8875df214404b3b/Untitled%201.png](Vulhub-mrrobot-walkthrough%20fb5dfb3aa9db40feb8875df214404b3b/Untitled%201.png)

Do a detail scan on those ports

```bash
nmap -nvv -sSV -p 22,80,443 --version-intensity 9 -A [ip]
```

![Vulhub-mrrobot-walkthrough%20fb5dfb3aa9db40feb8875df214404b3b/Untitled%202.png](Vulhub-mrrobot-walkthrough%20fb5dfb3aa9db40feb8875df214404b3b/Untitled%202.png)

### Nikto scan

Use nikto to scan the target

```bash
nikto -h [ip]
```

![Vulhub-mrrobot-walkthrough%20fb5dfb3aa9db40feb8875df214404b3b/Untitled%203.png](Vulhub-mrrobot-walkthrough%20fb5dfb3aa9db40feb8875df214404b3b/Untitled%203.png)

We can notice that there is a wordpress website on the target, that may be the right way.

Browser the /wp-links-opml.php and get the version of wordpress

![Vulhub-mrrobot-walkthrough%20fb5dfb3aa9db40feb8875df214404b3b/Untitled%204.png](Vulhub-mrrobot-walkthrough%20fb5dfb3aa9db40feb8875df214404b3b/Untitled%204.png)

## web attack

### wpscan

We use the wpscan to enumerate the usernames first.

```bash
wpscan --url [ip] --enumerate u
```

![Vulhub-mrrobot-walkthrough%20fb5dfb3aa9db40feb8875df214404b3b/Untitled%205.png](Vulhub-mrrobot-walkthrough%20fb5dfb3aa9db40feb8875df214404b3b/Untitled%205.png)

found nothing important but a robot.txt 

Browser that and got something

![Vulhub-mrrobot-walkthrough%20fb5dfb3aa9db40feb8875df214404b3b/Untitled%206.png](Vulhub-mrrobot-walkthrough%20fb5dfb3aa9db40feb8875df214404b3b/Untitled%206.png)

![Vulhub-mrrobot-walkthrough%20fb5dfb3aa9db40feb8875df214404b3b/Untitled%207.png](Vulhub-mrrobot-walkthrough%20fb5dfb3aa9db40feb8875df214404b3b/Untitled%207.png)

There is a flag and a dict, the dict may be the username or password of the wordpress.

Use burpsuite to bruteforce 

![Vulhub-mrrobot-walkthrough%20fb5dfb3aa9db40feb8875df214404b3b/Untitled%208.png](Vulhub-mrrobot-walkthrough%20fb5dfb3aa9db40feb8875df214404b3b/Untitled%208.png)

Got Elliot

 Use wpscan brute force the password.

```bash
wpscan --url [ip] --wordlist /usr/share/wordlists/rockyou.txt --username Elliot
```

Got the full credential, login in the wordpress admin page.

Edit the theme, change 404.php to a webshell. webshell can be generated by msfvenom

![Vulhub-mrrobot-walkthrough%20fb5dfb3aa9db40feb8875df214404b3b/Untitled%209.png](Vulhub-mrrobot-walkthrough%20fb5dfb3aa9db40feb8875df214404b3b/Untitled%209.png)

listen the local port 444, browser the 404.php.

![Vulhub-mrrobot-walkthrough%20fb5dfb3aa9db40feb8875df214404b3b/Untitled%2010.png](Vulhub-mrrobot-walkthrough%20fb5dfb3aa9db40feb8875df214404b3b/Untitled%2010.png)

Got shell. 

## privilege escape

Use python to get a nomal shell.

```bash
python -c 'import pty;pty.spawn("/bin/bash")'
```

![Vulhub-mrrobot-walkthrough%20fb5dfb3aa9db40feb8875df214404b3b/Untitled%2011.png](Vulhub-mrrobot-walkthrough%20fb5dfb3aa9db40feb8875df214404b3b/Untitled%2011.png)

We can find that the nmap is a suid privilege. So use this to get root.

Use nmap interactive 

![Vulhub-mrrobot-walkthrough%20fb5dfb3aa9db40feb8875df214404b3b/Untitled%2012.png](Vulhub-mrrobot-walkthrough%20fb5dfb3aa9db40feb8875df214404b3b/Untitled%2012.png)

Got root.